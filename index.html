<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Webbuy ðŸ›’</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script>
    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAv5BThaF59mBCw5Q0_t56OYy2VgihCxfY",
      authDomain: "webbuy-be987.firebaseapp.com",
      projectId: "webbuy-be987",
      storageBucket: "webbuy-be987.appspot.com",
      messagingSenderId: "1060406065263",
      appId: "1:1060406063:web:60d8a271234a541284759a"
    };
    firebase.initializeApp(firebaseConfig);
  </script>
</head>
<body>
  <header>
    <h1>ðŸ›’ WEBBUY</h1>
  </header>

  <!-- AUTHENTICATION -->
  <section id="auth-section">
    <!-- USER PHONE LOGIN -->
    <div id="user-auth">
      <h2>User Login</h2>
      <input type="tel" id="phoneNumber" placeholder="+265..." />
      <div id="recaptcha-container"></div>
      <button onclick="sendOTP()">Send OTP</button>
      <input type="text" id="otp" placeholder="Enter OTP" style="display:none;"/>
      <button id="verify-btn" onclick="verifyOTP()" style="display:none;">Verify OTP</button>
    </div>
    <!-- ADMIN EMAIL LOGIN -->
    <div id="admin-auth">
      <h2>Admin Login</h2>
      <input type="email" id="adminEmail" placeholder="Admin Email" />
      <input type="password" id="adminPassword" placeholder="Password" />
      <button onclick="adminLogin()">Login as Admin</button>
    </div>
  </section>

  <!-- USER ORDER SECTION -->
  <section id="order-section" style="display:none;">
    <h2>Place Your Order</h2>
    <label>Single Product Links (one per line):</label>
    <textarea id="links" placeholder="https://www.shein.com/..."></textarea>
    <label>Shared Cart Links (one per line):</label>
    <textarea id="cartLinks" placeholder="https://api-shein.shein.com/..."></textarea>
    <button onclick="processLinks()">Add to Cart</button>

    <div id="cart"></div>
    <div id="checkout" style="display:none;">
      <h3>Total: <span id="total-mwk"></span> MWK</h3>
      <button onclick="checkout()">Check-out</button>
      <div id="payment-info" style="display:none;">
        <h4>Payment Methods</h4>
        <pre>
Standard Bank:
9100006464472
(Ridhwan Omar)

First Capital Bank:
0001501051812
(Ridhwan Omar)

Airtel Money Agent:
118724
(Patricia Osman)
        </pre>
        <p><a href="https://wa.me/265996400600" target="_blank">ðŸ“± WhatsApp Chat</a></p>
        <small>Track your order and send payment screenshot</small>
      </div>
    </div>
  </section>

  <!-- ADMIN DASHBOARD -->
  <section id="admin-section" style="display:none;">
    <h2>Admin Dashboard</h2>
    <div>
      <label>Exchange Rate (USDâ†’MWK):</label>
      <input type="number" id="admin-rate" placeholder="3000" />
      <button onclick="adminUpdateRate()">Update Rate</button>
    </div>
    <div id="admin-orders">
      <h3>Paid Orders</h3>
      <ul id="order-history"></ul>
    </div>
    <div id="admin-cart">
      <h3>All Paid Items</h3>
      <ul id="all-paid-cart"></ul>
    </div>
    <div id="tracking-panel">
      <h3>Update Tracking</h3>
      <select id="tracking-user"><option value="">Select User</option></select>
      <select id="tracking-status">
        <option value="Processing">Processing</option>
        <option value="Shipped">Shipped</option>
        <option value="Arrived">Arrived</option>
        <option value="Delivered">Delivered</option>
      </select>
      <button onclick="updateTracking()">Update</button>
    </div>
  </section>

  <script src="script.js"></script>
</body>
</html>
