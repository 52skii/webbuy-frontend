<!DOCTYPE html>
<html lang="="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Webbuy 🛒</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>🛒 Webbuy</h1>
    <nav>
      <a href="#login">Login</a>
      <a href="#admin">Admin Dashboard</a>
    </nav>
  </header>

  <main id="auth-section">
    <!-- USER LOGIN -->
    <section id="user-login">
      <h2>📱 Login via Phone Number</h2>
      <input type="tel" id="phone-number" placeholder="+265..." />
      <div id="recaptcha-container"></div>
      <button onclick="sendOTP()">Send OTP</button>
      <input type="text" id="otp-code" placeholder="Enter OTP" style="display:none;" />
      <button onclick="verifyOTP()" style="display:none;" id="verify-btn">Verify OTP</button>
    </section>

    <!-- ADMIN LOGIN -->
    <section id="admin-login">
      <h2>🔐 Admin Login</h2>
      <input type="email" id="admin-email" placeholder="Admin Email" />
      <input type="password" id="admin-password" placeholder="Password" />
      <button onclick="adminLogin()">Login as Admin</button>
    </section>
  </main>

  <!-- USER ORDER SECTION -->
  <section id="user-section" style="display:none;">
    <h2>Paste Your Shein Product Links</h2>

    <label>🔗 Paste Single Product Links (1 per line):</label>
    <textarea id="links" placeholder="https://www.shein.com/item1...\nhttps://www.shein.com/item2..."></textarea>

    <label>🛍 Paste Shared Cart Link:</label>
    <input type="text" id="shared-cart-link" placeholder="https://api-shein.shein.com/..." />

    <button onclick="processLinks()">Add to Cart</button>
    <div id="cart"></div>

    <section id="checkout" style="display:none;">
      <h3>Total: <span id="total-mwk"></span> MWK</h3>
      <button onclick="checkout()">Check-out</button>

      <div id="payment-info" style="display:none;">
        <h4>Mode of Payment</h4>
        <pre>
Standard Bank:
9100006464472
(Ridhwan Omar)

First Capital Bank:
0001501051812
(Ridhwan Omar)

Airtel Money Agent:
118724
(Patricia Osman)
        </pre>
        <p><a href="https://wa.me/265996400600" target="_blank">📱 Chat on WhatsApp</a></p>
        <small>Track your order and send screenshot of payment</small>
      </div>
    </section>
  </section>

  <!-- ADMIN PANEL -->
  <section id="admin" style="display:none;">
    <h2>🛠 Admin Dashboard</h2>

    <div>
      <label for="admin-rate">Update Exchange Rate (USD → MWK):</label>
      <input type="number" id="admin-rate" placeholder="Enter new rate" />
      <button onclick="adminUpdateRate()">Update</button>
    </div>

    <div id="admin-orders">
      <h3>Paid Orders by User</h3>
      <ul id="order-history"></ul>
    </div>

    <div id="admin-cart">
      <h3>Combined Cart of All Paid Items</h3>
      <ul id="all-paid-cart"></ul>
    </div>

    <div id="tracking-panel">
      <h3>Update Order Tracking Status</h3>
      <label for="tracking-user">Select User:</label>
      <select id="tracking-user"></select>

      <label for="tracking-status">Select Status:</label>
      <select id="tracking-status">
        <option value="Processing">Processing</option>
        <option value="Shipped">Shipped</option>
        <option value="Arrived">Arrived</option>
        <option value="Delivered">Delivered</option>
      </select>

      <button onclick="updateTracking()">Update Tracking</button>
    </div>
  </section>

  <!-- FIREBASE SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>

  <!-- FIREBASE CONFIG -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAv5BThaF59mBCw5Q0_t56OYy2VgihCxfY",
      authDomain: "webbuy-be987.firebaseapp.com",
      projectId: "webbuy-be987",
      storageBucket: "webbuy-be987.appspot.com",
      messagingSenderId: "1060406065263",
      appId: "1:1060406065263:web:60d8a271234a541284759a"
    };
    firebase.initializeApp(firebaseConfig);
  </script>

  <!-- APP LOGIC -->
  <script src="script.js"></script>
</body>
</html>